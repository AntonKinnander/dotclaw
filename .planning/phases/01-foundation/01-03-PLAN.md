# PLAN 01-03: Daily Briefing Skill

## Objective

Create an agent skill that generates daily morning briefings based on journal entries, memory, and available context. The briefing should be intuitive - the agent has access to tools/data and constructs the briefing naturally.

## Context

@file:src/journal-manager.ts - Journal context retrieval
@file:src/memory-recall.ts - Memory search for context
@file:container/agent-runner/src/skill-loader.ts - Skill system

## Tasks

### Task 1: Create briefing generator skill

**Type:** `task` | **Files:** `global/skills/daily-briefing/SKILL.md` (new skill)

**Action:**
Create a skill that the agent can use to generate daily briefings:

```markdown
---
name: daily-briefing
description: Generate personalized daily briefings based on journal, goals, tasks, and calendar
license: MIT
---

# Daily Briefing

You are the daily briefing assistant. Each morning, you generate a personalized briefing for the user.

## Available Data Sources

You have access to:
- **Journals** - Previous day's journal via journal tools
- **Memory** - Long-term facts, goals, projects via memory search
- **Tasks** - In-progress and pending tasks
- **Calendar** - (when integrated) Today's events

## Briefing Structure

Generate a concise, actionable briefing:

1. **Morning Summary** - 2-3 sentences about yesterday's outcomes
2. **Focus Areas** - What to prioritize today based on goals and progress
3. **Pending Items** - In-progress tasks that need attention
4. **Suggestions** - 2-3 specific suggestions for continuing work

## Guidelines

- Be brief and actionable (under 500 words)
- Reference specific tasks/projects by name
- Acknowledge yesterday's sentiment if relevant
- Adapt tone based on user's response style preference
- Grow as more data sources become available

## Tools Available

- `get_journal_context` - Get recent journal entries
- `memory_search` - Search memory for goals, projects, facts
- `get_tasks_for_date` - Get pending/in-progress tasks
- `get_briefing_sources` - (future) Calendar, goals, etc.
```

**Verify:**
- Skill is discovered by agent
- Agent can list skill in catalog
- Skill description appears in system prompt

**Done when:** Skill file exists and is discoverable

---

### Task 2: Add briefing tools to container

**Type:** `task` | **Files:** `container/agent-runner/src/tools.ts`

**Action:**
Add MCP-style tools for briefing generation:

```typescript
{
  name: 'get_journal_context',
  description: 'Get recent journal entries for briefing context',
  inputSchema: {
    type: 'object',
    properties: {
      days_back: { type: 'number', default: 7 }
    }
  }
},
{
  name: 'get_tasks_for_date',
  description: 'Get pending and in-progress tasks for a date',
  inputSchema: {
    type: 'object',
    properties: {
      date: { type: 'string', description: 'YYYY-MM-DD format' }
    }
  }
},
{
  name: 'create_daily_briefing',
  description: 'Store a generated daily briefing',
  inputSchema: {
    type: 'object',
    properties: {
      date: { type: 'string' },
      briefing_text: { type: 'string' },
      sources: { type: 'object' }
    }
  }
}
```

**Verify:**
- Tools are registered in container
- Agent can call tools successfully
- Data is returned correctly

**Done when:** All briefing tools work from container

---

### Task 3: Create briefing storage and retrieval

**Type:** `task` | **Files:** `src/db.ts`

**Action:**
Add functions for managing briefings:

```typescript
// Store generated briefing
export function createBriefing(input: {
  group_folder: string;
  date: string;
  briefing_text: string;
  sources?: DailyBriefing['sources'];
}): DailyBriefing;

// Get briefing for specific date
export function getBriefingByDate(groupFolder: string, date: string): DailyBriefing | undefined;

// Get latest generated briefing
export function getLatestBriefing(groupFolder: string): DailyBriefing | undefined;

// Mark briefing as delivered
export function markBriefingDelivered(id: string): void;
```

**Verify:**
- Create briefing via function
- Retrieve it back
- Update delivery status
- Query for latest

**Done when:** Briefing CRUD operations work

---

## Verification (Overall)

1. **Skill Discovery:**
   - Ask agent "what skills do you have access to?"
   - Should list `daily-briefing`

2. **Tool Access:**
   - Agent should be able to call `get_journal_context`
   - Should return journal data

3. **End-to-End:**
   - Trigger briefing generation
   - Verify briefing is stored
   - Retrieve and verify content

## Success Criteria

- [ ] Briefing skill exists and is discoverable
- [ ] Agent has access to journal, task, and briefing tools
- [ ] Briefings can be created, stored, and retrieved
- [ ] Agent generates contextually relevant briefings

## Output

SUMMARY.md should contain:
- Skill created at `global/skills/daily-briefing/SKILL.md`
- Tools added to container for briefing generation
- Briefing storage functions implemented
- Example briefing generated
